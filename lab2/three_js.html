<!DOCTYPE html>
<html>
<head>
  <title>Лабораторна робота 2</title>
  <script src="https://threejs.org/build/three.min.js"></script>
</head>
<body>
  <script>
    // Створення сцени
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0xFFFFCC);

    // Створення камери
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.z = 10;

    // Створення рендерера
    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // Додавання світла
    const light = new THREE.DirectionalLight(0xffffff, 1.5);
    light.position.set(5, 5, 5);
    scene.add(light);

    // Створення циліндра
    const cylinderGeometry = new THREE.CylinderGeometry(1, 1, 3);
    const cylinderMaterial = new THREE.MeshPhongMaterial({ color: 0xffffff });
    const cylinder = new THREE.Mesh(cylinderGeometry, cylinderMaterial);
    cylinder.position.set(0, 1, 0);
    cylinder.rotation.set(0, 0, 45);
    cylinder.castShadow = true;
    cylinder.receiveShadow = true;
    scene.add(cylinder);

    // Додавання анімації до циліндра
    const cylinderAnimation = new THREE.AnimationMixer(cylinder);
    const cylinderPosition = cylinderAnimation.clipAction(new THREE.AnimationClip("position", 3, [
      new THREE.VectorKeyframeTrack(".position", [0, 1, 2, 3], [new THREE.Vector3(0, 1, 0), new THREE.Vector3(1, -1, 0), new THREE.Vector3(0, -1, 0), new THREE.Vector3(-1, -1, 0), new THREE.Vector3(0, 1, 0)])
    ]));
    cylinderPosition.setLoop(THREE.LoopRepeat, 5);
    cylinderAnimation.timeScale = 1;
    cylinderPosition.play();

    // Додавання площини
    const planeGeometry = new THREE.PlaneGeometry(10,10);
    const planeMaterial = new THREE.MeshPhongMaterial({ color: 0x7BC8A4 });
    const plane = new THREE.Mesh(planeGeometry, planeMaterial);
    plane.position.set(0, -2, 0);
    plane.rotation.set(-Math.PI / 4, 0, 0);
    plane.receiveShadow = true;
    scene.add(plane);

    // Оновлення сцени
    function animate() {
      // Виклик функції animate для анімації кадрів
      requestAnimationFrame(animate);
      // Оновлення анімації циліндра
      cylinderAnimation.update(0.01);

      // Оновлення рендерера
      renderer.render(scene, camera);
    }

    // Виклик функції animate для першого кадру
    animate();
  </script>
</body>
</html>
